{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6","webpack:///index.umd.min.js","webpack:///webpack/bootstrap 61ddfa4083dd58b20a6d?76b5","webpack:///external {\"root\":[\"ng\",\"core\"],\"commonjs\":\"@angular/core\",\"commonjs2\":\"@angular/core\",\"amd\":\"@angular/core\"}?ad34","webpack:///./src/ya-maps-api-wrapper.ts?0e50","webpack:///./src/utils/browser-globals.ts?b5a1","webpack:///./src/services/managers/claster-manager.ts?1acb","webpack:///./src/services/managers/marker-manager.ts?9b3b","webpack:///./src/services/managers/objectManager-manager.ts?b88d","webpack:///./src/services/ya-maps-loader.ts?aecb","webpack:///external {\"root\":\"Rx\",\"commonjs\":\"rxjs/Observable\",\"commonjs2\":\"rxjs/Observable\",\"amd\":\"rxjs/Observable\"}?c8c5","webpack:///./src/core.module.ts?bbcd","webpack:///./src/directives/claster.ts?7fb1","webpack:///./src/directives/marker.ts?4919","webpack:///./src/directives/objectManager.ts?c38c","webpack:///./src/directives/ymap.ts?8932","webpack:///./src/index.ts?7e4b"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_8__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__decorate","decorators","target","key","desc","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","__metadata","k","v","metadata","core_1","Observable_1","ya_maps_loader_1","browser_globals_1","YaMapsAPIWrapper","_loader","_zone","_this","_documentRef","_map","Promise","resolve","_mapResolver","createMap","el","mapOptions","load","then","create","setTimeout","ymaps","Map","map","catch","e","console","log","setCenter","latitude","longitude","getCenter","panTo","points","options","subscribeToMapEvent","eventName","Observable","observer","events","add","arg","run","next","createMarker","marker","Placemark","balloonContentHeader","balloonContentBody","balloonContentFooter","iconContent","draggable","preset","iconLayout","iconImageHref","iconImageSize","iconImageOffset","geoObjects","removeGeo","overlay","remove","createClaster","claster","markers","myGeoObjects","Array","forEach","x","point","GeoObject","geometry","type","coordinates","lat","lng","push","clusterer","Clusterer","createObjectManager","objectManager","datasource","nativeObjectManager","ObjectManager","clusterize","gridSize","objects","set","objectPreset","clusters","clasterPreset","navigateToGeoObject","id","obj","getById","balloon","open","checkYaSciptLoaded","getNativeDocument","getElementById","objectManagerSetFilter","filter","setFilter","Injectable","YaMapsAPILoader","NgZone","DocumentRef","WindowRef","getNativeWindow","window","document","BROWSER_GLOBALS_PROVIDERS","ya_maps_api_wrapper_1","ClasterManager","_mapsWrapper","_clasters","addClaster","clasterPromise","MarkerManager","_markers","deleteMarker","getNativeMarker","delete","addMarker","markerPromise","showBalloon","createEventObservable","ObjectManagerManager","_managers","manager","managerPromise","getNativeManager","w","_windowRef","script","createElement","async","defer","src","_scriptLoadingPromise","reject","onload","onerror","error","body","appendChild","coreDirectives","ymap_1","YaMap","marker_1","YaMarker","claster_1","YaClaster","objectManager_1","YaObjectManager","YaCoreModuleForRoot","YaCoreModule","forRoot","YaCoreModule_1","ngModule","providers","concat","provide","useClass","NgModule","declarations","claster_manager_1","clasterId","_clasterManager","_markerAddedToManger","_id","toString","ngOnChanges","changes","ngOnDestroy","_addEventListeners","Input","Directive","selector","marker_manager_1","markerId","_markerManager","markerClick","EventEmitter","dragEnd","_observableSubscriptions","unsubscribe","cs","subscribe","emit","ds","thisPlacemark","coords","getCoordinates","nativeMarker","Number","String","Boolean","Output","objectManager_manager_1","_manager","_addedToManger","selectedObjectId","_elem","zoom","mapType","controls","mapClick","actionTick","mapInit","ngOnInit","container","nativeElement","querySelector","_initMapInstance","updatePosition","center","_handleMapMouseEvents","panToObjects","params","clickEvents","emitter","event","Component","template","ElementRef","core_module_1"],"mappings":"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","file":"index.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@angular/core\"), require(\"rxjs/Observable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@angular/core\", \"rxjs/Observable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ticktock\"] = factory(require(\"@angular/core\"), require(\"rxjs/Observable\"));\n\telse\n\t\troot[\"ticktock\"] = factory(root[\"ng\"][\"core\"], root[\"Rx\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@angular/core\"), require(\"rxjs/Observable\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@angular/core\", \"rxjs/Observable\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ticktock\"] = factory(require(\"@angular/core\"), require(\"rxjs/Observable\"));\n\telse\n\t\troot[\"ticktock\"] = factory(root[\"ng\"][\"core\"], root[\"Rx\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 14);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar Observable_1 = __webpack_require__(8);\r\nvar ya_maps_loader_1 = __webpack_require__(6);\r\nvar browser_globals_1 = __webpack_require__(2);\r\nvar YaMapsAPIWrapper = /** @class */ (function () {\r\n    function YaMapsAPIWrapper(_loader, _zone, d) {\r\n        var _this = this;\r\n        this._loader = _loader;\r\n        this._zone = _zone;\r\n        this._documentRef = d;\r\n        this._map = new Promise(function (resolve) {\r\n            _this._mapResolver = resolve;\r\n        });\r\n    }\r\n    YaMapsAPIWrapper.prototype.createMap = function (el, mapOptions) {\r\n        var _this = this;\r\n        var res = this._loader.load().then(function () {\r\n            var create = function () { return setTimeout(function () {\r\n                if (ymaps.Map) {\r\n                    var map = new ymaps.Map(el, mapOptions);\r\n                    _this._mapResolver(map);\r\n                }\r\n                else {\r\n                    create();\r\n                }\r\n            }, 100); };\r\n            create();\r\n        }).catch(function (e) { return console.log(e); });\r\n        return res;\r\n    };\r\n    YaMapsAPIWrapper.prototype.setCenter = function (latitude, longitude) {\r\n        this._map.then(function (map) {\r\n            map.setCenter([latitude, longitude]);\r\n        });\r\n    };\r\n    YaMapsAPIWrapper.prototype.getCenter = function () {\r\n        return this._map.then(function (map) {\r\n            return map.getCenter();\r\n        });\r\n    };\r\n    YaMapsAPIWrapper.prototype.panTo = function (points, options) {\r\n        this._map.then(function (map) {\r\n            map.panTo(points, options);\r\n        });\r\n    };\r\n    YaMapsAPIWrapper.prototype.subscribeToMapEvent = function (eventName) {\r\n        var _this = this;\r\n        return Observable_1.Observable.create(function (observer) {\r\n            _this._map.then(function (m) {\r\n                m.events.add(eventName, function (arg) { _this._zone.run(function () { return observer.next(arg); }); });\r\n            });\r\n        });\r\n    };\r\n    YaMapsAPIWrapper.prototype.createMarker = function (marker) {\r\n        return this._map.then(function (map) {\r\n            var m = new ymaps.Placemark([marker.latitude, marker.longitude], {\r\n                balloonContentHeader: marker.balloonContentHeader,\r\n                balloonContentBody: marker.balloonContentBody,\r\n                balloonContentFooter: marker.balloonContentFooter,\r\n                iconContent: marker.iconContent\r\n            }, {\r\n                draggable: marker.draggable,\r\n                preset: marker.preset,\r\n                iconLayout: marker.iconLayout,\r\n                iconImageHref: marker.iconImageHref,\r\n                iconImageSize: marker.iconImageSize,\r\n                iconImageOffset: marker.iconImageOffset\r\n            });\r\n            map.geoObjects.add(m);\r\n            return m;\r\n        });\r\n    };\r\n    YaMapsAPIWrapper.prototype.removeGeo = function (overlay) {\r\n        this._map.then(function (map) {\r\n            map.geoObjects.remove(overlay);\r\n        });\r\n    };\r\n    YaMapsAPIWrapper.prototype.createClaster = function (claster) {\r\n        return this._map.then(function (map) {\r\n            if (claster.markers.length === 0) {\r\n                return;\r\n            }\r\n            var myGeoObjects;\r\n            myGeoObjects = new Array();\r\n            claster.markers.forEach(function (x) {\r\n                var point = new ymaps.GeoObject({\r\n                    geometry: { type: x.type, coordinates: [x.lat, x.lng] }\r\n                });\r\n                myGeoObjects.push(point);\r\n            });\r\n            var clusterer = new ymaps.Clusterer({});\r\n            clusterer.add(myGeoObjects);\r\n            map.geoObjects.add(clusterer);\r\n            return clusterer;\r\n        });\r\n    };\r\n    YaMapsAPIWrapper.prototype.createObjectManager = function (objectManager) {\r\n        return this._map.then(function (map) {\r\n            if (objectManager.datasource.length === 0) {\r\n                return;\r\n            }\r\n            var nativeObjectManager = new ymaps.ObjectManager({\r\n                clusterize: objectManager.clusterize,\r\n                gridSize: objectManager.gridSize\r\n            });\r\n            nativeObjectManager.add(objectManager.datasource);\r\n            nativeObjectManager.objects.options.set('preset', objectManager.objectPreset);\r\n            nativeObjectManager.clusters.options.set('preset', objectManager.clasterPreset);\r\n            map.geoObjects.add(nativeObjectManager);\r\n            return nativeObjectManager;\r\n        });\r\n    };\r\n    YaMapsAPIWrapper.prototype.navigateToGeoObject = function (objectManager, id) {\r\n        var obj = objectManager.objects.getById(id);\r\n        if (obj) {\r\n            this.setCenter(obj.geometry.coordinates[0], obj.geometry.coordinates[1]);\r\n            objectManager.objects.balloon.open(id);\r\n        }\r\n    };\r\n    YaMapsAPIWrapper.prototype.checkYaSciptLoaded = function () {\r\n        return this._documentRef.getNativeDocument().getElementById('YaScript');\r\n    };\r\n    YaMapsAPIWrapper.prototype.objectManagerSetFilter = function (objectManager, filter) {\r\n        objectManager.setFilter(filter);\r\n    };\r\n    YaMapsAPIWrapper = __decorate([\r\n        core_1.Injectable(),\r\n        __metadata(\"design:paramtypes\", [ya_maps_loader_1.YaMapsAPILoader, core_1.NgZone, browser_globals_1.DocumentRef])\r\n    ], YaMapsAPIWrapper);\r\n    return YaMapsAPIWrapper;\r\n}());\r\nexports.YaMapsAPIWrapper = YaMapsAPIWrapper;\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar WindowRef = /** @class */ (function () {\r\n    function WindowRef() {\r\n    }\r\n    WindowRef.prototype.getNativeWindow = function () { return window; };\r\n    return WindowRef;\r\n}());\r\nexports.WindowRef = WindowRef;\r\n// tslint:disable-next-line:max-classes-per-file\r\nvar DocumentRef = /** @class */ (function () {\r\n    function DocumentRef() {\r\n    }\r\n    DocumentRef.prototype.getNativeDocument = function () {\r\n        return document;\r\n    };\r\n    return DocumentRef;\r\n}());\r\nexports.DocumentRef = DocumentRef;\r\nexports.BROWSER_GLOBALS_PROVIDERS = [WindowRef, DocumentRef];\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar ya_maps_api_wrapper_1 = __webpack_require__(1);\r\nvar ClasterManager = /** @class */ (function () {\r\n    function ClasterManager(_mapsWrapper, _zone) {\r\n        this._mapsWrapper = _mapsWrapper;\r\n        this._zone = _zone;\r\n        this._clasters = new Map();\r\n    }\r\n    ClasterManager.prototype.addClaster = function (claster) {\r\n        var clasterPromise = this._mapsWrapper.createClaster(claster);\r\n        this._clasters.set(claster, clasterPromise);\r\n    };\r\n    ClasterManager = __decorate([\r\n        core_1.Injectable(),\r\n        __metadata(\"design:paramtypes\", [ya_maps_api_wrapper_1.YaMapsAPIWrapper, core_1.NgZone])\r\n    ], ClasterManager);\r\n    return ClasterManager;\r\n}());\r\nexports.ClasterManager = ClasterManager;\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar Observable_1 = __webpack_require__(8);\r\nvar ya_maps_api_wrapper_1 = __webpack_require__(1);\r\nvar MarkerManager = /** @class */ (function () {\r\n    function MarkerManager(_mapsWrapper, _zone) {\r\n        this._mapsWrapper = _mapsWrapper;\r\n        this._zone = _zone;\r\n        this._markers = new Map();\r\n    }\r\n    MarkerManager.prototype.deleteMarker = function (marker) {\r\n        var _this = this;\r\n        var m = this._markers.get(marker);\r\n        if (m == null) {\r\n            return Promise.resolve();\r\n        }\r\n        // tslint:disable-next-line:no-shadowed-variable\r\n        return m.then(function (m) {\r\n            return _this._zone.run(function () {\r\n                // tslint:disable-next-line:no-shadowed-variable\r\n                _this.getNativeMarker(marker).then(function (m) {\r\n                    _this._mapsWrapper.removeGeo(m);\r\n                    _this._markers.delete(marker);\r\n                });\r\n            });\r\n        });\r\n    };\r\n    MarkerManager.prototype.addMarker = function (marker) {\r\n        var markerPromise = this._mapsWrapper.createMarker(marker);\r\n        this._markers.set(marker, markerPromise);\r\n    };\r\n    MarkerManager.prototype.showBalloon = function (marker) {\r\n        this.getNativeMarker(marker).then(function (m) {\r\n            m.balloon.open();\r\n        });\r\n    };\r\n    MarkerManager.prototype.getNativeMarker = function (marker) {\r\n        return this._markers.get(marker);\r\n    };\r\n    MarkerManager.prototype.createEventObservable = function (eventName, marker) {\r\n        var _this = this;\r\n        return Observable_1.Observable.create(function (observer) {\r\n            _this._markers.get(marker).then(function (m) {\r\n                m.events.add(eventName, function (e) { return _this._zone.run(function () { return observer.next(e); }); });\r\n            });\r\n        });\r\n    };\r\n    MarkerManager = __decorate([\r\n        core_1.Injectable(),\r\n        __metadata(\"design:paramtypes\", [ya_maps_api_wrapper_1.YaMapsAPIWrapper, core_1.NgZone])\r\n    ], MarkerManager);\r\n    return MarkerManager;\r\n}());\r\nexports.MarkerManager = MarkerManager;\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar ya_maps_api_wrapper_1 = __webpack_require__(1);\r\nvar ObjectManagerManager = /** @class */ (function () {\r\n    function ObjectManagerManager(_mapsWrapper, _zone) {\r\n        this._mapsWrapper = _mapsWrapper;\r\n        this._zone = _zone;\r\n        this._managers = new Map();\r\n    }\r\n    ObjectManagerManager.prototype.add = function (manager) {\r\n        var managerPromise = this._mapsWrapper.createObjectManager(manager);\r\n        this._managers.set(manager, managerPromise);\r\n    };\r\n    ObjectManagerManager.prototype.navigateToGeoObject = function (manager, id) {\r\n        var _this = this;\r\n        this.getNativeManager(manager).then(function (p) {\r\n            _this._mapsWrapper.navigateToGeoObject(p, id);\r\n        });\r\n    };\r\n    ObjectManagerManager.prototype.getNativeManager = function (manager) {\r\n        return this._managers.get(manager);\r\n    };\r\n    ObjectManagerManager.prototype.setFilter = function (manager, filter) {\r\n        var _this = this;\r\n        this.getNativeManager(manager).then(function (p) {\r\n            _this._mapsWrapper.objectManagerSetFilter(p, filter);\r\n        });\r\n    };\r\n    ObjectManagerManager = __decorate([\r\n        core_1.Injectable(),\r\n        __metadata(\"design:paramtypes\", [ya_maps_api_wrapper_1.YaMapsAPIWrapper, core_1.NgZone])\r\n    ], ObjectManagerManager);\r\n    return ObjectManagerManager;\r\n}());\r\nexports.ObjectManagerManager = ObjectManagerManager;\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar browser_globals_1 = __webpack_require__(2);\r\nvar YaMapsAPILoader = /** @class */ (function () {\r\n    function YaMapsAPILoader(w, d) {\r\n        this._windowRef = w;\r\n        this._documentRef = d;\r\n    }\r\n    YaMapsAPILoader.prototype.load = function () {\r\n        var script = this._documentRef.getNativeDocument().createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.async = false;\r\n        script.defer = true;\r\n        script.id = 'YaScript';\r\n        var callbackName = \"angular2YAMapsAPILoader\";\r\n        script.src = 'https://api-maps.yandex.ru/2.1/?lang=ru_RU&callback=angular2YAMapsAPILoader';\r\n        // tslint:disable-next-line:ban-types\r\n        this._scriptLoadingPromise = new Promise(function (resolve, reject) {\r\n            script.onload = function () { resolve(); };\r\n            script.onerror = function (error) { reject(); };\r\n        });\r\n        this._documentRef.getNativeDocument().body.appendChild(script);\r\n        return this._scriptLoadingPromise;\r\n    };\r\n    YaMapsAPILoader = __decorate([\r\n        core_1.Injectable(),\r\n        __metadata(\"design:paramtypes\", [browser_globals_1.WindowRef, browser_globals_1.DocumentRef])\r\n    ], YaMapsAPILoader);\r\n    return YaMapsAPILoader;\r\n}());\r\nexports.YaMapsAPILoader = YaMapsAPILoader;\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar ymap_1 = __webpack_require__(13);\r\nvar marker_1 = __webpack_require__(11);\r\nvar claster_1 = __webpack_require__(10);\r\nvar objectManager_1 = __webpack_require__(12);\r\nvar ya_maps_loader_1 = __webpack_require__(6);\r\nvar browser_globals_1 = __webpack_require__(2);\r\n__export(__webpack_require__(7));\r\n/**\r\n * @internal\r\n */\r\nfunction coreDirectives() {\r\n    return [\r\n        ymap_1.YaMap,\r\n        marker_1.YaMarker,\r\n        claster_1.YaClaster,\r\n        objectManager_1.YaObjectManager\r\n    ];\r\n}\r\nexports.coreDirectives = coreDirectives;\r\n/**\r\n * The angular-ya-maps core module. Contains all Directives/Services/Pipes\r\n * of the core module. Please use `YaCoreModule.forRoot()` in your app module.\r\n */\r\nvar YaCoreModule = /** @class */ (function () {\r\n    function YaCoreModule() {\r\n    }\r\n    YaCoreModule_1 = YaCoreModule;\r\n    /**\r\n     * Please use this method when you register the module at the root level.\r\n     */\r\n    YaCoreModule.forRoot = function () {\r\n        return {\r\n            ngModule: YaCoreModule_1,\r\n            providers: browser_globals_1.BROWSER_GLOBALS_PROVIDERS.concat([\r\n                { provide: ya_maps_loader_1.YaMapsAPILoader, useClass: ya_maps_loader_1.YaMapsAPILoader }\r\n            ]),\r\n        };\r\n    };\r\n    YaCoreModule = YaCoreModule_1 = __decorate([\r\n        core_1.NgModule({ declarations: coreDirectives(), exports: coreDirectives() })\r\n    ], YaCoreModule);\r\n    return YaCoreModule;\r\n    var YaCoreModule_1;\r\n}());\r\nexports.YaCoreModule = YaCoreModule;\r\nfunction YaCoreModuleForRoot() {\r\n    return [\r\n        YaCoreModule.forRoot()\r\n    ];\r\n}\r\nexports.YaCoreModuleForRoot = YaCoreModuleForRoot;\r\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// tslint:disable-next-line:max-line-length\r\nvar core_1 = __webpack_require__(0);\r\nvar ya_maps_api_wrapper_1 = __webpack_require__(1);\r\nvar claster_manager_1 = __webpack_require__(3);\r\nvar clasterId = 0;\r\nvar YaClaster = /** @class */ (function () {\r\n    function YaClaster(_clasterManager) {\r\n        this._clasterManager = _clasterManager;\r\n        this._markerAddedToManger = false;\r\n        this._id = (clasterId++).toString();\r\n    }\r\n    YaClaster.prototype.ngOnChanges = function (changes) {\r\n        if (!this._markerAddedToManger) {\r\n            this._clasterManager.addClaster(this);\r\n        }\r\n    };\r\n    // tslint:disable-next-line:no-empty\r\n    YaClaster.prototype.ngOnDestroy = function () { };\r\n    // tslint:disable-next-line:no-empty\r\n    YaClaster.prototype._addEventListeners = function () { };\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Array)\r\n    ], YaClaster.prototype, \"markers\", void 0);\r\n    YaClaster = __decorate([\r\n        core_1.Directive({\r\n            selector: 'ya-claster',\r\n            providers: [\r\n                ya_maps_api_wrapper_1.YaMapsAPIWrapper\r\n            ]\r\n        })\r\n        // tslint:disable-next-line:directive-class-suffix\r\n        ,\r\n        __metadata(\"design:paramtypes\", [claster_manager_1.ClasterManager])\r\n    ], YaClaster);\r\n    return YaClaster;\r\n}());\r\nexports.YaClaster = YaClaster;\r\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// tslint:disable-next-line:max-line-length\r\nvar core_1 = __webpack_require__(0);\r\nvar ya_maps_api_wrapper_1 = __webpack_require__(1);\r\nvar marker_manager_1 = __webpack_require__(4);\r\nvar markerId = 0;\r\nvar YaMarker = /** @class */ (function () {\r\n    function YaMarker(_markerManager) {\r\n        this._markerManager = _markerManager;\r\n        this.draggable = false;\r\n        this.preset = 'islands#blueIcon';\r\n        this.markerClick = new core_1.EventEmitter();\r\n        // tslint:disable-next-line:max-line-length\r\n        this.dragEnd = new core_1.EventEmitter();\r\n        this._markerAddedToManger = false;\r\n        this._observableSubscriptions = [];\r\n        this._id = (markerId++).toString();\r\n    }\r\n    YaMarker.prototype.ngOnChanges = function (changes) {\r\n        if (!this._markerAddedToManger) {\r\n            this._markerManager.addMarker(this);\r\n            this._markerAddedToManger = true;\r\n            this._addEventListeners();\r\n            return;\r\n        }\r\n        if (changes['showInfo']) {\r\n            this._markerManager.showBalloon(this);\r\n        }\r\n    };\r\n    YaMarker.prototype.ngOnDestroy = function () {\r\n        this._markerManager.deleteMarker(this);\r\n        this._observableSubscriptions.forEach(function (s) { return s.unsubscribe(); });\r\n    };\r\n    YaMarker.prototype._addEventListeners = function () {\r\n        var _this = this;\r\n        // click event\r\n        var cs = this._markerManager.createEventObservable('click', this).subscribe(function () {\r\n            _this._markerManager.showBalloon(_this);\r\n            _this.markerClick.emit(null);\r\n        });\r\n        this._observableSubscriptions.push(cs);\r\n        // dragend event\r\n        // tslint:disable-next-line:max-line-length\r\n        var ds = this._markerManager.createEventObservable('dragend', this).subscribe(function (e) {\r\n            var thisPlacemark = e.get('target');\r\n            var coords = thisPlacemark.geometry.getCoordinates();\r\n            _this._markerManager.getNativeMarker(_this).then(function (m) {\r\n                // tslint:disable-next-line:max-line-length\r\n                _this.dragEnd.emit({ lat: coords[0], lng: coords[1], nativeMarker: m });\r\n            });\r\n        });\r\n        this._observableSubscriptions.push(ds);\r\n    };\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Number)\r\n    ], YaMarker.prototype, \"latitude\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Number)\r\n    ], YaMarker.prototype, \"longitude\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], YaMarker.prototype, \"balloonLayout\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], YaMarker.prototype, \"balloonContentHeader\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], YaMarker.prototype, \"balloonContentBody\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], YaMarker.prototype, \"balloonContentFooter\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Boolean)\r\n    ], YaMarker.prototype, \"draggable\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], YaMarker.prototype, \"preset\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], YaMarker.prototype, \"iconContent\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Boolean)\r\n    ], YaMarker.prototype, \"showInfo\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], YaMarker.prototype, \"iconLayout\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], YaMarker.prototype, \"iconImageHref\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], YaMarker.prototype, \"iconImageSize\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], YaMarker.prototype, \"iconImageOffset\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", core_1.EventEmitter)\r\n    ], YaMarker.prototype, \"markerClick\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", core_1.EventEmitter)\r\n    ], YaMarker.prototype, \"dragEnd\", void 0);\r\n    YaMarker = __decorate([\r\n        core_1.Directive({\r\n            selector: 'ya-marker',\r\n            providers: [\r\n                ya_maps_api_wrapper_1.YaMapsAPIWrapper\r\n            ]\r\n        })\r\n        // tslint:disable-next-line:directive-class-suffix\r\n        ,\r\n        __metadata(\"design:paramtypes\", [marker_manager_1.MarkerManager])\r\n    ], YaMarker);\r\n    return YaMarker;\r\n}());\r\nexports.YaMarker = YaMarker;\r\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_1 = __webpack_require__(0);\r\nvar ya_maps_api_wrapper_1 = __webpack_require__(1);\r\nvar objectManager_manager_1 = __webpack_require__(5);\r\nvar markerId = 0;\r\nvar YaObjectManager = /** @class */ (function () {\r\n    function YaObjectManager(_manager) {\r\n        this._manager = _manager;\r\n        this.clusterize = false;\r\n        this.clasterPreset = 'islands#blueIcon';\r\n        this.objectPreset = 'islands#blueClusterIcons';\r\n        this.gridSize = 0;\r\n        this._observableSubscriptions = [];\r\n        this._addedToManger = false;\r\n        this._id = (markerId++).toString();\r\n    }\r\n    YaObjectManager.prototype.ngOnChanges = function (changes) {\r\n        if (!this._addedToManger) {\r\n            this._manager.add(this);\r\n            this._addedToManger = true;\r\n            return;\r\n        }\r\n        if (changes['selectedObjectId']) {\r\n            this._manager.navigateToGeoObject(this, this.selectedObjectId);\r\n        }\r\n        if (changes['filter']) {\r\n            console.log('filter ' + this.filter);\r\n            this._manager.setFilter(this, this.filter);\r\n        }\r\n    };\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Boolean)\r\n    ], YaObjectManager.prototype, \"clusterize\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], YaObjectManager.prototype, \"datasource\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], YaObjectManager.prototype, \"clasterPreset\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", String)\r\n    ], YaObjectManager.prototype, \"objectPreset\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Number)\r\n    ], YaObjectManager.prototype, \"gridSize\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Number)\r\n    ], YaObjectManager.prototype, \"selectedObjectId\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], YaObjectManager.prototype, \"filter\", void 0);\r\n    YaObjectManager = __decorate([\r\n        core_1.Directive({\r\n            selector: 'ya-object-manager',\r\n            providers: [\r\n                ya_maps_api_wrapper_1.YaMapsAPIWrapper\r\n            ]\r\n        })\r\n        // tslint:disable-next-line:directive-class-suffix\r\n        ,\r\n        __metadata(\"design:paramtypes\", [objectManager_manager_1.ObjectManagerManager])\r\n    ], YaObjectManager);\r\n    return YaObjectManager;\r\n}());\r\nexports.YaObjectManager = YaObjectManager;\r\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __metadata = (this && this.__metadata) || function (k, v) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// tslint:disable-next-line:max-line-length\r\nvar core_1 = __webpack_require__(0);\r\nvar ya_maps_api_wrapper_1 = __webpack_require__(1);\r\nvar marker_manager_1 = __webpack_require__(4);\r\nvar claster_manager_1 = __webpack_require__(3);\r\nvar objectManager_manager_1 = __webpack_require__(5);\r\nvar mapTypes = __webpack_require__(7);\r\nvar YaMap = /** @class */ (function () {\r\n    function YaMap(_elem, _mapsWrapper) {\r\n        this._elem = _elem;\r\n        this._mapsWrapper = _mapsWrapper;\r\n        this.longitude = 0;\r\n        this.latitude = 0;\r\n        this.zoom = 8;\r\n        this.mapType = 'yandex#map';\r\n        this.controls = null;\r\n        // tslint:disable-next-line:max-line-length\r\n        this.mapClick = new core_1.EventEmitter();\r\n        this.actionTick = new core_1.EventEmitter();\r\n        this.mapInit = false;\r\n        this._observableSubscriptions = [];\r\n    }\r\n    YaMap.prototype.ngOnInit = function () {\r\n        var container = this._elem.nativeElement.querySelector('.map-container-inner');\r\n        this._initMapInstance(container);\r\n        this.mapInit = true;\r\n    };\r\n    YaMap.prototype.ngOnChanges = function (changes) {\r\n        if (this.mapInit) {\r\n            this.updatePosition(changes);\r\n            this.panTo(changes);\r\n        }\r\n    };\r\n    YaMap.prototype._initMapInstance = function (el) {\r\n        if (this.controls != null) {\r\n            this._mapsWrapper.createMap(el, {\r\n                center: [this.latitude, this.longitude], zoom: this.zoom, type: this.mapType,\r\n                controls: this.controls\r\n            });\r\n        }\r\n        else {\r\n            this._mapsWrapper.createMap(el, {\r\n                center: [this.latitude, this.longitude], zoom: this.zoom, type: this.mapType\r\n            });\r\n        }\r\n        this._handleMapMouseEvents();\r\n    };\r\n    YaMap.prototype.updatePosition = function (changes) {\r\n        if (changes['latitude'] == null && changes['longitude'] == null) {\r\n            return;\r\n        }\r\n        this._mapsWrapper.setCenter(this.latitude, this.longitude);\r\n    };\r\n    YaMap.prototype.panTo = function (changes) {\r\n        if (changes['panToObjects'] == null) {\r\n            return;\r\n        }\r\n        this._mapsWrapper.panTo(this.panToObjects.points, this.panToObjects.params);\r\n    };\r\n    YaMap.prototype._handleMapMouseEvents = function () {\r\n        var _this = this;\r\n        var clickEvents = [\r\n            { name: 'click', emitter: this.mapClick }\r\n        ];\r\n        var events = [\r\n            { name: 'actiontick', emitter: this.actionTick }\r\n        ];\r\n        clickEvents.forEach(function (e) {\r\n            var s = _this._mapsWrapper.subscribeToMapEvent(e.name).subscribe(function (event) {\r\n                var coords = event.get('coords');\r\n                var value = { lat: coords[0], lng: coords[1] };\r\n                e.emitter.emit(value);\r\n            });\r\n            _this._observableSubscriptions.push(s);\r\n        });\r\n        events.forEach(function (e) {\r\n            var s = _this._mapsWrapper.subscribeToMapEvent(e.name).subscribe(function (event) {\r\n                _this._mapsWrapper.getCenter().then(function (coords) {\r\n                    _this.latitude = coords[0];\r\n                    _this.longitude = coords[1];\r\n                    var value = { lat: coords[0], lng: coords[1] };\r\n                    e.emitter.emit(value);\r\n                });\r\n            });\r\n            _this._observableSubscriptions.push(s);\r\n        });\r\n    };\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Number)\r\n    ], YaMap.prototype, \"longitude\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Number)\r\n    ], YaMap.prototype, \"latitude\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Number)\r\n    ], YaMap.prototype, \"zoom\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Number)\r\n    ], YaMap.prototype, \"minZoom\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Number)\r\n    ], YaMap.prototype, \"maxZoom\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], YaMap.prototype, \"mapType\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Array)\r\n    ], YaMap.prototype, \"controls\", void 0);\r\n    __decorate([\r\n        core_1.Input(),\r\n        __metadata(\"design:type\", Object)\r\n    ], YaMap.prototype, \"panToObjects\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", core_1.EventEmitter)\r\n    ], YaMap.prototype, \"mapClick\", void 0);\r\n    __decorate([\r\n        core_1.Output(),\r\n        __metadata(\"design:type\", core_1.EventEmitter)\r\n    ], YaMap.prototype, \"actionTick\", void 0);\r\n    YaMap = __decorate([\r\n        core_1.Component({\r\n            selector: 'ya-map',\r\n            providers: [\r\n                ya_maps_api_wrapper_1.YaMapsAPIWrapper,\r\n                marker_manager_1.MarkerManager,\r\n                claster_manager_1.ClasterManager,\r\n                objectManager_manager_1.ObjectManagerManager\r\n            ],\r\n            template: \"\\n    <div class=\\\"map-container-inner\\\" id=\\\"map\\\" >\\n      <ng-content></ng-content>\\n    </div>\\n  \"\r\n        })\r\n        // tslint:disable-next-line:component-class-suffix\r\n        ,\r\n        __metadata(\"design:paramtypes\", [core_1.ElementRef, ya_maps_api_wrapper_1.YaMapsAPIWrapper])\r\n    ], YaMap);\r\n    return YaMap;\r\n}());\r\nexports.YaMap = YaMap;\r\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar core_module_1 = __webpack_require__(9);\r\nexports.YaCoreModule = core_module_1.YaCoreModule;\r\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// index.umd.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 61ddfa4083dd58b20a6d","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":[\"ng\",\"core\"],\"commonjs\":\"@angular/core\",\"commonjs2\":\"@angular/core\",\"amd\":\"@angular/core\"}\n// module id = 0\n// module chunks = 0 1","import { Injectable, NgZone } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Observer } from 'rxjs/Observer';\n\nimport * as mapTypes from './ya-maps-types';\nimport { YaMapsAPILoader } from './services/ya-maps-loader';\nimport { YaMarker } from './directives/marker';\nimport { YaClaster } from './directives/claster';\nimport { YaObjectManager } from './directives/objectManager';\nimport { DocumentRef, WindowRef } from './utils/browser-globals';\n\ndeclare var ymaps: any;\n\n@Injectable()\nexport class YaMapsAPIWrapper {\n    private _map: Promise<mapTypes.YandexMap>;\n    private _mapResolver: (value?: mapTypes.YandexMap) => void;\n    private _documentRef: DocumentRef;\n\n    constructor(private _loader: YaMapsAPILoader, private _zone: NgZone, d: DocumentRef) {\n        this._documentRef = d;\n        this._map = new Promise<mapTypes.YandexMap>((resolve: () => void) => {\n            this._mapResolver = resolve;\n        });\n    }\n\n    public createMap(el: HTMLElement, mapOptions: mapTypes.MapOptions): Promise<void> {\n        const res = this._loader.load().then(() => {\n            const create = () => setTimeout(() => {\n                if (ymaps.Map) {\n                    const map = new ymaps.Map(el, mapOptions);\n                    this._mapResolver(map as mapTypes.YandexMap);\n                } else {\n                    create();\n                }\n            }, 100);\n            create();\n        }).catch((e) => console.log(e));\n        return res;\n    }\n\n    public setCenter(latitude: number, longitude: number) {\n        this._map.then((map: mapTypes.YandexMap) => {\n            map.setCenter([latitude, longitude]);\n        });\n    }\n\n    public getCenter(): Promise<void> {\n        return this._map.then((map: mapTypes.YandexMap) => {\n            return map.getCenter();\n        });\n    }\n\n    public panTo(points: any[], options: any[]) {\n        this._map.then((map: mapTypes.YandexMap) => {\n            map.panTo(points, options);\n        });\n    }\n\n    public subscribeToMapEvent<E>(eventName: string): Observable<E> {\n        return Observable.create((observer: Observer<E>) => {\n            this._map.then((m: mapTypes.YandexMap) => {\n                m.events.add(eventName, (arg: E) => { this._zone.run(() => observer.next(arg)); });\n            });\n        });\n    }\n\n    public createMarker(marker: YaMarker): Promise<mapTypes.Marker> {\n        return this._map.then((map: mapTypes.YandexMap) => {\n            const m = new ymaps.Placemark([marker.latitude, marker.longitude], {\n                balloonContentHeader: marker.balloonContentHeader,\n                balloonContentBody: marker.balloonContentBody,\n                balloonContentFooter: marker.balloonContentFooter,\n                iconContent: marker.iconContent\n            },\n                {\n                    draggable: marker.draggable,\n                    preset: marker.preset,\n                    iconLayout: marker.iconLayout,\n                    iconImageHref: marker.iconImageHref,\n                    iconImageSize: marker.iconImageSize,\n                    iconImageOffset: marker.iconImageOffset\n                });\n            map.geoObjects.add(m);\n            return m;\n        });\n    }\n\n    public removeGeo(overlay: any) {\n        this._map.then((map: mapTypes.YandexMap) => {\n            map.geoObjects.remove(overlay);\n        });\n    }\n\n    public createClaster(claster: YaClaster): Promise<mapTypes.Claster> {\n        return this._map.then((map: mapTypes.YandexMap) => {\n            if (claster.markers.length === 0) {\n                return;\n            }\n\n            let myGeoObjects: any[];\n            myGeoObjects = new Array<any>();\n            claster.markers.forEach((x: mapTypes.MarkerClaster) => {\n                const point = new ymaps.GeoObject({\n                    geometry: { type: x.type, coordinates: [x.lat, x.lng] }\n                });\n                myGeoObjects.push(point);\n            });\n\n            const clusterer = new ymaps.Clusterer({});\n            clusterer.add(myGeoObjects);\n            map.geoObjects.add(clusterer);\n\n            return clusterer;\n        });\n\n    }\n\n    public createObjectManager(objectManager: YaObjectManager): any {\n        return this._map.then((map: mapTypes.YandexMap) => {\n\n            if (objectManager.datasource.length === 0) {\n                return;\n            }\n\n            const nativeObjectManager = new ymaps.ObjectManager({\n                clusterize: objectManager.clusterize,\n                gridSize: objectManager.gridSize\n            });\n\n            nativeObjectManager.add(objectManager.datasource);\n\n            nativeObjectManager.objects.options.set('preset', objectManager.objectPreset);\n            nativeObjectManager.clusters.options.set('preset', objectManager.clasterPreset);\n            map.geoObjects.add(nativeObjectManager);\n            return nativeObjectManager;\n        });\n    }\n\n    public navigateToGeoObject(objectManager: any, id: any) {\n        const obj = objectManager.objects.getById(id);\n        if (obj) {\n            this.setCenter(obj.geometry.coordinates[0], obj.geometry.coordinates[1]);\n            objectManager.objects.balloon.open(id);\n        }\n    }\n\n    public checkYaSciptLoaded() {\n        return this._documentRef.getNativeDocument().getElementById('YaScript');\n    }\n\n    public objectManagerSetFilter(objectManager: any, filter: any) {\n        objectManager.setFilter(filter);\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/ya-maps-api-wrapper.ts","import { Provider } from '@angular/core';\n\nexport class WindowRef {\n  public getNativeWindow(): any { return window; }\n}\n\n// tslint:disable-next-line:max-classes-per-file\nexport class DocumentRef {\n\n  public getNativeDocument(): any {\n    return document;\n  }\n\n}\n\nexport const BROWSER_GLOBALS_PROVIDERS: Provider[] = [WindowRef, DocumentRef];\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/utils/browser-globals.ts","import { Injectable, NgZone } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Observer } from 'rxjs/Observer';\n\nimport { YaClaster } from './../../directives/claster';\nimport { YaMapsAPIWrapper } from '../../ya-maps-api-wrapper';\nimport { MarkerClaster, Claster } from '../../ya-maps-types';\n\n@Injectable()\nexport class ClasterManager {\n  private _clasters: Map<YaClaster, Promise<Claster>> =\n  new Map<YaClaster, Promise<Claster>>();\n\n  constructor(private _mapsWrapper: YaMapsAPIWrapper, private _zone: NgZone) { }\n\n  public addClaster(claster: YaClaster) {\n    const clasterPromise = this._mapsWrapper.createClaster(claster);\n    this._clasters.set(claster, clasterPromise);\n  }\n\n  /* getNativeMarker(marker: YaMarker): Promise<Marker> {\n     return this._markers.get(marker);\n   }\n\n   createEventObservable<T>(eventName: string, marker: YaMarker): Observable<T> {\n     return Observable.create((observer: Observer<T>) => {\n       this._markers.get(marker).then((m: Marker) => {\n         m.events.add(eventName, (e: T) => this._zone.run(() => observer.next(e)));\n       });\n     });\n   }\n   */\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/services/managers/claster-manager.ts","import { Injectable, NgZone } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Observer } from 'rxjs/Observer';\n\nimport { YaMarker } from './../../directives/marker';\n\nimport { YaMapsAPIWrapper } from '../../ya-maps-api-wrapper';\nimport { Marker } from '../../ya-maps-types';\n\n@Injectable()\nexport class MarkerManager {\n  private _markers: Map<YaMarker, Promise<Marker>> =\n  new Map<YaMarker, Promise<Marker>>();\n\n  constructor(private _mapsWrapper: YaMapsAPIWrapper, private _zone: NgZone) { }\n\n  public deleteMarker(marker: YaMarker): Promise<void> {\n    const m = this._markers.get(marker);\n    if (m == null) {\n      return Promise.resolve();\n    }\n    // tslint:disable-next-line:no-shadowed-variable\n    return m.then((m: Marker) => {\n      return this._zone.run(() => {\n        // tslint:disable-next-line:no-shadowed-variable\n        this.getNativeMarker(marker).then((m: Marker) => {\n          this._mapsWrapper.removeGeo(m);\n          this._markers.delete(marker);\n        });\n      });\n    });\n  }\n\n  public addMarker(marker: YaMarker) {\n    const markerPromise = this._mapsWrapper.createMarker(marker);\n    this._markers.set(marker, markerPromise);\n  }\n\n  public showBalloon(marker: YaMarker) {\n    this.getNativeMarker(marker).then((m: Marker) => {\n      m.balloon.open();\n    });\n\n  }\n\n  public getNativeMarker(marker: YaMarker): Promise<Marker> {\n    return this._markers.get(marker);\n  }\n\n  public createEventObservable<T>(eventName: string, marker: YaMarker): Observable<T> {\n    return Observable.create((observer: Observer<T>) => {\n      this._markers.get(marker).then((m: Marker) => {\n        m.events.add(eventName, (e: T) => this._zone.run(() => observer.next(e)));\n      });\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/services/managers/marker-manager.ts","import { Injectable, NgZone } from '@angular/core';\nimport { Observable } from 'rxjs/Observable';\nimport { Observer } from 'rxjs/Observer';\n\nimport { YaObjectManager } from './../../directives/objectManager';\nimport { YaMapsAPIWrapper } from '../../ya-maps-api-wrapper';\nimport { ObjectManager } from '../../ya-maps-types';\n\n@Injectable()\nexport class ObjectManagerManager {\n  private _managers: Map<YaObjectManager, Promise<ObjectManager>> =\n  new Map<YaObjectManager, Promise<ObjectManager>>();\n\n  constructor(private _mapsWrapper: YaMapsAPIWrapper, private _zone: NgZone) { }\n\n  public add(manager: YaObjectManager) {\n    const managerPromise = this._mapsWrapper.createObjectManager(manager);\n    this._managers.set(manager, managerPromise);\n  }\n\n  public navigateToGeoObject(manager: YaObjectManager, id: number) {\n    this.getNativeManager(manager).then((p: any) => {\n      this._mapsWrapper.navigateToGeoObject(p, id);\n    });\n\n  }\n\n  public getNativeManager(manager: YaObjectManager): Promise<ObjectManager> {\n    return this._managers.get(manager);\n  }\n\n  public setFilter(manager: YaObjectManager, filter: any) {\n    this.getNativeManager(manager).then((p: any) => {\n      this._mapsWrapper.objectManagerSetFilter(p, filter);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/services/managers/objectManager-manager.ts","import { Inject, Injectable, OpaqueToken } from '@angular/core';\nimport { DocumentRef, WindowRef } from './../utils/browser-globals';\n\n@Injectable()\nexport class YaMapsAPILoader {\n    private _scriptLoadingPromise: Promise<void>;\n\n    private _windowRef: WindowRef;\n    private _documentRef: DocumentRef;\n\n    constructor(w: WindowRef, d: DocumentRef) {\n\n        this._windowRef = w;\n        this._documentRef = d;\n    }\n\n    public load(): Promise<void> {\n        const script = this._documentRef.getNativeDocument().createElement('script');\n        script.type = 'text/javascript';\n        script.async = false;\n        script.defer = true;\n        script.id = 'YaScript';\n        const callbackName: string = `angular2YAMapsAPILoader`;\n        script.src = 'https://api-maps.yandex.ru/2.1/?lang=ru_RU&callback=angular2YAMapsAPILoader';\n\n        // tslint:disable-next-line:ban-types\n        this._scriptLoadingPromise = new Promise<void>((resolve: Function, reject: Function) => {\n            script.onload = () => { resolve(); };\n            script.onerror = (error: Event) => { reject(); };\n        });\n        this._documentRef.getNativeDocument().body.appendChild(script);\n        return this._scriptLoadingPromise;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/services/ya-maps-loader.ts","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"Rx\",\"commonjs\":\"rxjs/Observable\",\"commonjs2\":\"rxjs/Observable\",\"amd\":\"rxjs/Observable\"}\n// module id = 8\n// module chunks = 0 1","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport { YaMap } from './directives/ymap';\nimport { YaMarker } from './directives/marker';\nimport { YaClaster } from './directives/claster';\nimport { YaObjectManager } from './directives/objectManager';\nimport { YaMapsAPILoader } from './services/ya-maps-loader';\nimport { BROWSER_GLOBALS_PROVIDERS } from './utils/browser-globals';\n\nexport * from './ya-maps-types';\n\n/**\n * @internal\n */\nexport function coreDirectives() {\n  return [\n    YaMap,\n    YaMarker,\n    YaClaster,\n    YaObjectManager\n  ];\n}\n\n/**\n * The angular-ya-maps core module. Contains all Directives/Services/Pipes\n * of the core module. Please use `YaCoreModule.forRoot()` in your app module.\n */\n@NgModule({ declarations: coreDirectives(), exports: coreDirectives() })\nexport class YaCoreModule {\n  /**\n   * Please use this method when you register the module at the root level.\n   */\n  public static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: YaCoreModule,\n      providers: [\n        ...BROWSER_GLOBALS_PROVIDERS, { provide: YaMapsAPILoader, useClass: YaMapsAPILoader }\n      ],\n    };\n  }\n}\n\nexport function YaCoreModuleForRoot() {\n  return [\n    YaCoreModule.forRoot()\n  ];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/core.module.ts","// tslint:disable-next-line:max-line-length\nimport { Directive, EventEmitter, OnChanges, OnDestroy, SimpleChange, AfterContentInit, ContentChildren, QueryList, Input } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { YaMapsAPIWrapper } from '../ya-maps-api-wrapper';\nimport * as mapTypes from '../ya-maps-types';\nimport { ClasterManager } from '../services/managers/claster-manager';\nimport { Claster, MarkerClaster } from '../ya-maps-types';\n\nlet clasterId = 0;\n\n@Directive({\n    selector: 'ya-claster',\n    providers: [\n        YaMapsAPIWrapper\n    ]\n})\n\n// tslint:disable-next-line:directive-class-suffix\nexport class YaClaster implements OnChanges, OnDestroy {\n    @Input() public markers: any[];\n\n    private _id: string;\n    private _markerAddedToManger: boolean = false;\n\n    constructor(private _clasterManager: ClasterManager) {\n        this._id = (clasterId++).toString();\n    }\n\n    public ngOnChanges(changes: { [key: string]: SimpleChange }) {\n        if (!this._markerAddedToManger) {\n            this._clasterManager.addClaster(this);\n        }\n    }\n\n    // tslint:disable-next-line:no-empty\n    public ngOnDestroy() { }\n\n    // tslint:disable-next-line:no-empty\n    private _addEventListeners() { }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/directives/claster.ts","// tslint:disable-next-line:max-line-length\nimport { Directive, EventEmitter, OnChanges, OnDestroy, SimpleChange, Input, Output } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { YaMapsAPIWrapper } from '../ya-maps-api-wrapper';\nimport * as mapTypes from '../ya-maps-types';\nimport { MarkerManager } from '../services/managers/marker-manager';\nimport { Marker } from '../ya-maps-types';\n\nlet markerId = 0;\n\n@Directive({\n  selector: 'ya-marker',\n  providers: [\n    YaMapsAPIWrapper\n  ]\n})\n\n// tslint:disable-next-line:directive-class-suffix\nexport class YaMarker implements OnChanges, OnDestroy {\n  @Input() public latitude: number;\n  @Input() public longitude: number;\n  @Input() public balloonLayout: any;\n  @Input() public balloonContentHeader: string;\n  @Input() public balloonContentBody: string;\n  @Input() public balloonContentFooter: string;\n  @Input() public draggable: boolean = false;\n  @Input() public preset: string = 'islands#blueIcon';\n  @Input() public iconContent: string;\n  @Input() public showInfo: boolean;\n  // default#image\n  @Input() public iconLayout: any;\n  @Input() public iconImageHref: any;\n  // [30, 42]\n  @Input() public iconImageSize: any;\n  // [-5, -38]\n  @Input() public iconImageOffset: any;\n\n  @Output() public markerClick: EventEmitter<void> = new EventEmitter<void>();\n  // tslint:disable-next-line:max-line-length\n  @Output() public dragEnd: EventEmitter<mapTypes.MapMouseEvent> = new EventEmitter<mapTypes.MapMouseEvent>();\n\n  private _markerAddedToManger: boolean = false;\n  private _id: string;\n  private _observableSubscriptions: Subscription[] = [];\n\n  constructor(private _markerManager: MarkerManager) {\n    this._id = (markerId++).toString();\n  }\n\n  public ngOnChanges(changes: { [key: string]: SimpleChange }) {\n    if (!this._markerAddedToManger) {\n\n      this._markerManager.addMarker(this);\n      this._markerAddedToManger = true;\n      this._addEventListeners();\n      return;\n    }\n    if (changes['showInfo']) {\n      this._markerManager.showBalloon(this);\n    }\n  }\n\n  public ngOnDestroy() {\n    this._markerManager.deleteMarker(this);\n    this._observableSubscriptions.forEach((s) => s.unsubscribe());\n  }\n\n  private _addEventListeners() {\n    // click event\n    const cs = this._markerManager.createEventObservable('click', this).subscribe(() => {\n      this._markerManager.showBalloon(this);\n      this.markerClick.emit(null);\n    });\n    this._observableSubscriptions.push(cs);\n    // dragend event\n    // tslint:disable-next-line:max-line-length\n    const ds = this._markerManager.createEventObservable<mapTypes.MouseEvent>('dragend', this).subscribe((e: mapTypes.MouseEvent) => {\n\n      const thisPlacemark = e.get('target');\n      const coords = thisPlacemark.geometry.getCoordinates();\n      this._markerManager.getNativeMarker(this).then((m: Marker) => {\n        // tslint:disable-next-line:max-line-length\n        this.dragEnd.emit({ lat: coords[0], lng: coords[1], nativeMarker: m } as mapTypes.MapMouseEvent);\n      });\n    });\n    this._observableSubscriptions.push(ds);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/directives/marker.ts","import {\n  Directive, EventEmitter, OnChanges, OnDestroy, SimpleChange,\n  AfterContentInit, ContentChildren, QueryList, Input\n} from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { YaMapsAPIWrapper } from '../ya-maps-api-wrapper';\nimport * as mapTypes from '../ya-maps-types';\nimport { ObjectManagerManager } from '../services/managers/objectManager-manager';\n\nlet markerId = 0;\n\n@Directive({\n  selector: 'ya-object-manager',\n  providers: [\n    YaMapsAPIWrapper\n  ]\n})\n\n// tslint:disable-next-line:directive-class-suffix\nexport class YaObjectManager implements OnChanges {\n  @Input() public clusterize: boolean = false;\n  @Input() public datasource: any;\n  @Input() public clasterPreset: string = 'islands#blueIcon';\n  @Input() public objectPreset: string = 'islands#blueClusterIcons';\n  @Input() public gridSize: number = 0;\n  @Input() public selectedObjectId: number;\n  @Input() public filter: any;\n\n  private _id: string;\n  private _observableSubscriptions: Subscription[] = [];\n  private _addedToManger: boolean = false;\n\n  constructor(private _manager: ObjectManagerManager) {\n    this._id = (markerId++).toString();\n  }\n\n  public ngOnChanges(changes: { [key: string]: SimpleChange }) {\n    if (!this._addedToManger) {\n\n      this._manager.add(this);\n      this._addedToManger = true;\n      return;\n    }\n\n    if (changes['selectedObjectId']) {\n      this._manager.navigateToGeoObject(this, this.selectedObjectId);\n    }\n    if (changes['filter']) {\n      console.log('filter ' + this.filter);\n      this._manager.setFilter(this, this.filter);\n    }\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/directives/objectManager.ts","// tslint:disable-next-line:max-line-length\nimport { Component, ElementRef, EventEmitter, OnChanges, OnDestroy, OnInit, SimpleChanges, Input, Output } from '@angular/core';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { YaMapsAPIWrapper } from '../ya-maps-api-wrapper';\nimport { MarkerManager } from '../services/managers/marker-manager';\nimport { ClasterManager } from '../services/managers/claster-manager';\nimport { ObjectManagerManager } from '../services/managers/objectManager-manager';\nimport * as mapTypes from '../ya-maps-types';\n\n@Component({\n  selector: 'ya-map',\n  providers: [\n    YaMapsAPIWrapper,\n    MarkerManager,\n    ClasterManager,\n    ObjectManagerManager\n  ],\n  template: `\n    <div class=\"map-container-inner\" id=\"map\" >\n      <ng-content></ng-content>\n    </div>\n  `\n})\n// tslint:disable-next-line:component-class-suffix\nexport class YaMap implements OnInit, OnChanges {\n\n  @Input() public longitude: number = 0;\n  @Input() public latitude: number = 0;\n  @Input() public zoom: number = 8;\n  @Input() public minZoom: number;\n  @Input() public maxZoom: number;\n  @Input() public mapType: any = 'yandex#map';\n  @Input() public controls: any[] = null;\n  @Input() public panToObjects: mapTypes.PanToObjects;\n  // tslint:disable-next-line:max-line-length\n  @Output() public mapClick: EventEmitter<mapTypes.MapClickMouseEvent> = new EventEmitter<mapTypes.MapClickMouseEvent>();\n  @Output() public actionTick: EventEmitter<mapTypes.MapClickMouseEvent> = new EventEmitter<mapTypes.MapClickMouseEvent>();\n\n  public mapInit: boolean = false;\n\n  private _observableSubscriptions: Subscription[] = [];\n\n  constructor(private _elem: ElementRef, private _mapsWrapper: YaMapsAPIWrapper) { }\n\n  public ngOnInit() {\n    const container = this._elem.nativeElement.querySelector('.map-container-inner');\n    this._initMapInstance(container);\n    this.mapInit = true;\n  }\n\n  public ngOnChanges(changes: SimpleChanges) {\n    if (this.mapInit) {\n      this.updatePosition(changes);\n      this.panTo(changes);\n    }\n  }\n\n  private _initMapInstance(el: HTMLElement) {\n    if (this.controls != null) {\n      this._mapsWrapper.createMap(el, {\n        center: [this.latitude, this.longitude], zoom: this.zoom, type: this.mapType,\n        controls: this.controls\n      });\n\n    } else {\n      this._mapsWrapper.createMap(el, {\n        center: [this.latitude, this.longitude], zoom: this.zoom, type: this.mapType\n      });\n\n    }\n\n    this._handleMapMouseEvents();\n  }\n\n  private updatePosition(changes: SimpleChanges) {\n    if (changes['latitude'] == null && changes['longitude'] == null) {\n      return;\n    }\n    this._mapsWrapper.setCenter(this.latitude, this.longitude);\n  }\n\n  private panTo(changes: SimpleChanges) {\n    if (changes['panToObjects'] == null) {\n      return;\n    }\n    this._mapsWrapper.panTo(this.panToObjects.points, this.panToObjects.params);\n  }\n\n  private _handleMapMouseEvents() {\n    interface Emitter {\n      emit(value: any): void;\n    }\n    interface Event { name: string; emitter: Emitter; }\n\n    const clickEvents: Event[] = [\n      { name: 'click', emitter: this.mapClick }\n    ];\n    const events: Event[] = [\n      { name: 'actiontick', emitter: this.actionTick }\n    ];\n\n    clickEvents.forEach((e: Event) => {\n      const s = this._mapsWrapper.subscribeToMapEvent<{ latLng: any }>(e.name).subscribe(\n        (event: any) => {\n          const coords = event.get('coords');\n          const value = { lat: coords[0], lng: coords[1] } as mapTypes.MapClickMouseEvent;\n          e.emitter.emit(value);\n        });\n      this._observableSubscriptions.push(s);\n    });\n\n    events.forEach((e: Event) => {\n      const s = this._mapsWrapper.subscribeToMapEvent<{ latLng: any }>(e.name).subscribe(\n        (event: any) => {\n\n          this._mapsWrapper.getCenter().then((coords: any) => {\n            this.latitude = coords[0];\n            this.longitude = coords[1];\n            const value = { lat: coords[0], lng: coords[1] } as mapTypes.MapClickMouseEvent;\n            e.emitter.emit(value);\n          });\n\n        });\n      this._observableSubscriptions.push(s);\n    });\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/directives/ymap.ts","export { YaCoreModule } from './core.module';\n\n\n\n// WEBPACK FOOTER //\n// ./~/angular2-template-loader!./src/index.ts"],"sourceRoot":""}