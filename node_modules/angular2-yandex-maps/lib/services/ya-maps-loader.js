import { Injectable } from '@angular/core';
import { DocumentRef, WindowRef } from './../utils/browser-globals';
var YaMapsAPILoader = /** @class */ (function () {
    function YaMapsAPILoader(w, d) {
        this._windowRef = w;
        this._documentRef = d;
    }
    YaMapsAPILoader.prototype.load = function () {
        var script = this._documentRef.getNativeDocument().createElement('script');
        script.type = 'text/javascript';
        script.async = false;
        script.defer = true;
        script.id = 'YaScript';
        var callbackName = "angular2YAMapsAPILoader";
        script.src = 'https://api-maps.yandex.ru/2.1/?lang=ru_RU&callback=angular2YAMapsAPILoader';
        // tslint:disable-next-line:ban-types
        this._scriptLoadingPromise = new Promise(function (resolve, reject) {
            script.onload = function () { resolve(); };
            script.onerror = function (error) { reject(); };
        });
        this._documentRef.getNativeDocument().body.appendChild(script);
        return this._scriptLoadingPromise;
    };
    YaMapsAPILoader.decorators = [
        { type: Injectable },
    ];
    /** @nocollapse */
    YaMapsAPILoader.ctorParameters = function () { return [
        { type: WindowRef, },
        { type: DocumentRef, },
    ]; };
    return YaMapsAPILoader;
}());
export { YaMapsAPILoader };
//# sourceMappingURL=ya-maps-loader.js.map