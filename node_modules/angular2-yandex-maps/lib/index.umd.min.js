/**
 * angular2-yandex-maps - yandex-maps-directive
 * @version v1.0.42
 * @author undefined
 * @link undefined
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@angular/core"),require("rxjs/Observable")):"function"==typeof define&&define.amd?define(["@angular/core","rxjs/Observable"],t):"object"==typeof exports?exports.ticktock=t(require("@angular/core"),require("rxjs/Observable")):e.ticktock=t(e.ng.core,e.Rx)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(t,n){t.exports=e},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(8),s=n(6),c=n(2),p=function(){function e(e,t,n){var r=this;this._loader=e,this._zone=t,this._documentRef=n,this._map=new Promise(function(e){r._mapResolver=e})}return e.prototype.createMap=function(e,t){var n=this;return this._loader.load().then(function(){var r=function(){return setTimeout(function(){if(ymaps.Map){var o=new ymaps.Map(e,t);n._mapResolver(o)}else r()},100)};r()}).catch(function(e){return console.log(e)})},e.prototype.setCenter=function(e,t){this._map.then(function(n){n.setCenter([e,t])})},e.prototype.getCenter=function(){return this._map.then(function(e){return e.getCenter()})},e.prototype.panTo=function(e,t){this._map.then(function(n){n.panTo(e,t)})},e.prototype.subscribeToMapEvent=function(e){var t=this;return i.Observable.create(function(n){t._map.then(function(r){r.events.add(e,function(e){t._zone.run(function(){return n.next(e)})})})})},e.prototype.createMarker=function(e){return this._map.then(function(t){var n=new ymaps.Placemark([e.latitude,e.longitude],{balloonContentHeader:e.balloonContentHeader,balloonContentBody:e.balloonContentBody,balloonContentFooter:e.balloonContentFooter,iconContent:e.iconContent},{draggable:e.draggable,preset:e.preset,iconLayout:e.iconLayout,iconImageHref:e.iconImageHref,iconImageSize:e.iconImageSize,iconImageOffset:e.iconImageOffset});return t.geoObjects.add(n),n})},e.prototype.removeGeo=function(e){this._map.then(function(t){t.geoObjects.remove(e)})},e.prototype.createClaster=function(e){return this._map.then(function(t){if(0!==e.markers.length){var n;n=new Array,e.markers.forEach(function(e){var t=new ymaps.GeoObject({geometry:{type:e.type,coordinates:[e.lat,e.lng]}});n.push(t)});var r=new ymaps.Clusterer({});return r.add(n),t.geoObjects.add(r),r}})},e.prototype.createObjectManager=function(e){return this._map.then(function(t){if(0!==e.datasource.length){var n=new ymaps.ObjectManager({clusterize:e.clusterize,gridSize:e.gridSize});return n.add(e.datasource),n.objects.options.set("preset",e.objectPreset),n.clusters.options.set("preset",e.clasterPreset),t.geoObjects.add(n),n}})},e.prototype.navigateToGeoObject=function(e,t){var n=e.objects.getById(t);n&&(this.setCenter(n.geometry.coordinates[0],n.geometry.coordinates[1]),e.objects.balloon.open(t))},e.prototype.checkYaSciptLoaded=function(){return this._documentRef.getNativeDocument().getElementById("YaScript")},e.prototype.objectManagerSetFilter=function(e,t){e.setFilter(t)},e=r([a.Injectable(),o("design:paramtypes",[s.YaMapsAPILoader,a.NgZone,c.DocumentRef])],e)}();t.YaMapsAPIWrapper=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.getNativeWindow=function(){return window},e}();t.WindowRef=r;var o=function(){function e(){}return e.prototype.getNativeDocument=function(){return document},e}();t.DocumentRef=o,t.BROWSER_GLOBALS_PROVIDERS=[r,o]},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),s=function(){function e(e,t){this._mapsWrapper=e,this._zone=t,this._clasters=new Map}return e.prototype.addClaster=function(e){var t=this._mapsWrapper.createClaster(e);this._clasters.set(e,t)},e=r([a.Injectable(),o("design:paramtypes",[i.YaMapsAPIWrapper,a.NgZone])],e)}();t.ClasterManager=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(8),s=n(1),c=function(){function e(e,t){this._mapsWrapper=e,this._zone=t,this._markers=new Map}return e.prototype.deleteMarker=function(e){var t=this,n=this._markers.get(e);return null==n?Promise.resolve():n.then(function(n){return t._zone.run(function(){t.getNativeMarker(e).then(function(n){t._mapsWrapper.removeGeo(n),t._markers.delete(e)})})})},e.prototype.addMarker=function(e){var t=this._mapsWrapper.createMarker(e);this._markers.set(e,t)},e.prototype.showBalloon=function(e){this.getNativeMarker(e).then(function(e){e.balloon.open()})},e.prototype.getNativeMarker=function(e){return this._markers.get(e)},e.prototype.createEventObservable=function(e,t){var n=this;return i.Observable.create(function(r){n._markers.get(t).then(function(t){t.events.add(e,function(e){return n._zone.run(function(){return r.next(e)})})})})},e=r([a.Injectable(),o("design:paramtypes",[s.YaMapsAPIWrapper,a.NgZone])],e)}();t.MarkerManager=c},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),s=function(){function e(e,t){this._mapsWrapper=e,this._zone=t,this._managers=new Map}return e.prototype.add=function(e){var t=this._mapsWrapper.createObjectManager(e);this._managers.set(e,t)},e.prototype.navigateToGeoObject=function(e,t){var n=this;this.getNativeManager(e).then(function(e){n._mapsWrapper.navigateToGeoObject(e,t)})},e.prototype.getNativeManager=function(e){return this._managers.get(e)},e.prototype.setFilter=function(e,t){var n=this;this.getNativeManager(e).then(function(e){n._mapsWrapper.objectManagerSetFilter(e,t)})},e=r([a.Injectable(),o("design:paramtypes",[i.YaMapsAPIWrapper,a.NgZone])],e)}();t.ObjectManagerManager=s},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(2),s=function(){function e(e,t){this._windowRef=e,this._documentRef=t}return e.prototype.load=function(){var e=this._documentRef.getNativeDocument().createElement("script");e.type="text/javascript",e.async=!1,e.defer=!0,e.id="YaScript";return e.src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&callback=angular2YAMapsAPILoader",this._scriptLoadingPromise=new Promise(function(t,n){e.onload=function(){t()},e.onerror=function(e){n()}}),this._documentRef.getNativeDocument().body.appendChild(e),this._scriptLoadingPromise},e=r([a.Injectable(),o("design:paramtypes",[i.WindowRef,i.DocumentRef])],e)}();t.YaMapsAPILoader=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(){return[s.YaMap,c.YaMarker,p.YaClaster,u.YaObjectManager]}function o(){return[l.forRoot()]}var a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),s=n(13),c=n(11),p=n(10),u=n(12),f=n(6),d=n(2);!function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(7)),t.coreDirectives=r;var l=function(){function e(){}return t=e,e.forRoot=function(){return{ngModule:t,providers:d.BROWSER_GLOBALS_PROVIDERS.concat([{provide:f.YaMapsAPILoader,useClass:f.YaMapsAPILoader}])}},e=t=a([i.NgModule({declarations:r(),exports:r()})],e);var t}();t.YaCoreModule=l,t.YaCoreModuleForRoot=o},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),s=n(3),c=0,p=function(){function e(e){this._clasterManager=e,this._markerAddedToManger=!1,this._id=(c++).toString()}return e.prototype.ngOnChanges=function(e){this._markerAddedToManger||this._clasterManager.addClaster(this)},e.prototype.ngOnDestroy=function(){},e.prototype._addEventListeners=function(){},r([a.Input(),o("design:type",Array)],e.prototype,"markers",void 0),e=r([a.Directive({selector:"ya-claster",providers:[i.YaMapsAPIWrapper]}),o("design:paramtypes",[s.ClasterManager])],e)}();t.YaClaster=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),s=n(4),c=0,p=function(){function e(e){this._markerManager=e,this.draggable=!1,this.preset="islands#blueIcon",this.markerClick=new a.EventEmitter,this.dragEnd=new a.EventEmitter,this._markerAddedToManger=!1,this._observableSubscriptions=[],this._id=(c++).toString()}return e.prototype.ngOnChanges=function(e){if(!this._markerAddedToManger)return this._markerManager.addMarker(this),this._markerAddedToManger=!0,void this._addEventListeners();e.showInfo&&this._markerManager.showBalloon(this)},e.prototype.ngOnDestroy=function(){this._markerManager.deleteMarker(this),this._observableSubscriptions.forEach(function(e){return e.unsubscribe()})},e.prototype._addEventListeners=function(){var e=this,t=this._markerManager.createEventObservable("click",this).subscribe(function(){e._markerManager.showBalloon(e),e.markerClick.emit(null)});this._observableSubscriptions.push(t);var n=this._markerManager.createEventObservable("dragend",this).subscribe(function(t){var n=t.get("target"),r=n.geometry.getCoordinates();e._markerManager.getNativeMarker(e).then(function(t){e.dragEnd.emit({lat:r[0],lng:r[1],nativeMarker:t})})});this._observableSubscriptions.push(n)},r([a.Input(),o("design:type",Number)],e.prototype,"latitude",void 0),r([a.Input(),o("design:type",Number)],e.prototype,"longitude",void 0),r([a.Input(),o("design:type",Object)],e.prototype,"balloonLayout",void 0),r([a.Input(),o("design:type",String)],e.prototype,"balloonContentHeader",void 0),r([a.Input(),o("design:type",String)],e.prototype,"balloonContentBody",void 0),r([a.Input(),o("design:type",String)],e.prototype,"balloonContentFooter",void 0),r([a.Input(),o("design:type",Boolean)],e.prototype,"draggable",void 0),r([a.Input(),o("design:type",String)],e.prototype,"preset",void 0),r([a.Input(),o("design:type",String)],e.prototype,"iconContent",void 0),r([a.Input(),o("design:type",Boolean)],e.prototype,"showInfo",void 0),r([a.Input(),o("design:type",Object)],e.prototype,"iconLayout",void 0),r([a.Input(),o("design:type",Object)],e.prototype,"iconImageHref",void 0),r([a.Input(),o("design:type",Object)],e.prototype,"iconImageSize",void 0),r([a.Input(),o("design:type",Object)],e.prototype,"iconImageOffset",void 0),r([a.Output(),o("design:type",a.EventEmitter)],e.prototype,"markerClick",void 0),r([a.Output(),o("design:type",a.EventEmitter)],e.prototype,"dragEnd",void 0),e=r([a.Directive({selector:"ya-marker",providers:[i.YaMapsAPIWrapper]}),o("design:paramtypes",[s.MarkerManager])],e)}();t.YaMarker=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),s=n(5),c=0,p=function(){function e(e){this._manager=e,this.clusterize=!1,this.clasterPreset="islands#blueIcon",this.objectPreset="islands#blueClusterIcons",this.gridSize=0,this._observableSubscriptions=[],this._addedToManger=!1,this._id=(c++).toString()}return e.prototype.ngOnChanges=function(e){if(!this._addedToManger)return this._manager.add(this),void(this._addedToManger=!0);e.selectedObjectId&&this._manager.navigateToGeoObject(this,this.selectedObjectId),e.filter&&(console.log("filter "+this.filter),this._manager.setFilter(this,this.filter))},r([a.Input(),o("design:type",Boolean)],e.prototype,"clusterize",void 0),r([a.Input(),o("design:type",Object)],e.prototype,"datasource",void 0),r([a.Input(),o("design:type",String)],e.prototype,"clasterPreset",void 0),r([a.Input(),o("design:type",String)],e.prototype,"objectPreset",void 0),r([a.Input(),o("design:type",Number)],e.prototype,"gridSize",void 0),r([a.Input(),o("design:type",Number)],e.prototype,"selectedObjectId",void 0),r([a.Input(),o("design:type",Object)],e.prototype,"filter",void 0),e=r([a.Directive({selector:"ya-object-manager",providers:[i.YaMapsAPIWrapper]}),o("design:paramtypes",[s.ObjectManagerManager])],e)}();t.YaObjectManager=p},function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),i=n(1),s=n(4),c=n(3),p=n(5),u=(n(7),function(){function e(e,t){this._elem=e,this._mapsWrapper=t,this.longitude=0,this.latitude=0,this.zoom=8,this.mapType="yandex#map",this.controls=null,this.mapClick=new a.EventEmitter,this.actionTick=new a.EventEmitter,this.mapInit=!1,this._observableSubscriptions=[]}return e.prototype.ngOnInit=function(){var e=this._elem.nativeElement.querySelector(".map-container-inner");this._initMapInstance(e),this.mapInit=!0},e.prototype.ngOnChanges=function(e){this.mapInit&&(this.updatePosition(e),this.panTo(e))},e.prototype._initMapInstance=function(e){null!=this.controls?this._mapsWrapper.createMap(e,{center:[this.latitude,this.longitude],zoom:this.zoom,type:this.mapType,controls:this.controls}):this._mapsWrapper.createMap(e,{center:[this.latitude,this.longitude],zoom:this.zoom,type:this.mapType}),this._handleMapMouseEvents()},e.prototype.updatePosition=function(e){null==e.latitude&&null==e.longitude||this._mapsWrapper.setCenter(this.latitude,this.longitude)},e.prototype.panTo=function(e){null!=e.panToObjects&&this._mapsWrapper.panTo(this.panToObjects.points,this.panToObjects.params)},e.prototype._handleMapMouseEvents=function(){var e=this,t=[{name:"click",emitter:this.mapClick}],n=[{name:"actiontick",emitter:this.actionTick}];t.forEach(function(t){var n=e._mapsWrapper.subscribeToMapEvent(t.name).subscribe(function(e){var n=e.get("coords"),r={lat:n[0],lng:n[1]};t.emitter.emit(r)});e._observableSubscriptions.push(n)}),n.forEach(function(t){var n=e._mapsWrapper.subscribeToMapEvent(t.name).subscribe(function(n){e._mapsWrapper.getCenter().then(function(n){e.latitude=n[0],e.longitude=n[1];var r={lat:n[0],lng:n[1]};t.emitter.emit(r)})});e._observableSubscriptions.push(n)})},r([a.Input(),o("design:type",Number)],e.prototype,"longitude",void 0),r([a.Input(),o("design:type",Number)],e.prototype,"latitude",void 0),r([a.Input(),o("design:type",Number)],e.prototype,"zoom",void 0),r([a.Input(),o("design:type",Number)],e.prototype,"minZoom",void 0),r([a.Input(),o("design:type",Number)],e.prototype,"maxZoom",void 0),r([a.Input(),o("design:type",Object)],e.prototype,"mapType",void 0),r([a.Input(),o("design:type",Array)],e.prototype,"controls",void 0),r([a.Input(),o("design:type",Object)],e.prototype,"panToObjects",void 0),r([a.Output(),o("design:type",a.EventEmitter)],e.prototype,"mapClick",void 0),r([a.Output(),o("design:type",a.EventEmitter)],e.prototype,"actionTick",void 0),e=r([a.Component({selector:"ya-map",providers:[i.YaMapsAPIWrapper,s.MarkerManager,c.ClasterManager,p.ObjectManagerManager],template:'\n    <div class="map-container-inner" id="map" >\n      <ng-content></ng-content>\n    </div>\n  '}),o("design:paramtypes",[a.ElementRef,i.YaMapsAPIWrapper])],e)}());t.YaMap=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);t.YaCoreModule=r.YaCoreModule}])});
//# sourceMappingURL=index.umd.min.js.map